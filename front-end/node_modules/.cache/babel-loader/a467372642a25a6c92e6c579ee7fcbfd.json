{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rodri\\\\OneDrive\\\\Documentos\\\\cicc-app\\\\front-end\\\\src\\\\views\\\\Issuance\\\\tables\\\\MdfeWarningTable.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { ViewsContext } from \"context/ViewsContext\";\nimport TagsInput from \"components/tags/TagsInput\";\nimport Table from \"components/tables/Table\";\nimport MODAL_TYPE_ENUM from \"common/enumerators/ModalTypeEnum\";\nimport { useModalWithData } from \"common/hooks/useModalWithData\";\nimport { MDFE_ORIGIN } from \"common/model/Mdfe\";\nimport DfeIssuanceModal from \"components/modals/DfeIssuanceModal/DfeIssueanceModal\";\nimport NOTIFICATION_TYPE_ENUM from \"common/enumerators/NotificationTypeEnum\";\nimport { createBaseHttpRequestBody, createQueryHttpRequestBody } from \"axios/AxiosUtils\";\nimport { isExternalUser } from \"common/SessionUtils\";\nimport { formatCnpjCpf } from \"common/utils/validate\";\nimport { SEVERITY } from \"common/model/WarningConfig\";\nimport Severity from \"components/table-elements/Severity\";\nimport { ID_CONFIG } from \"common/model/WarningConfig\";\nimport { NAME } from \"common/model/WarningConfig\";\nimport Warning from \"components/table-elements/Warning\";\nimport { DHEMI } from \"common/model/Dfe\";\nimport { FISCAL_NOTIFICATION_DATE } from \"common/model/Notification\";\nimport { CNPJ_ISSUER } from \"common/model/Dfe\";\nimport { CPF_ISSUER } from \"common/model/Dfe\";\nimport { CNPJ_RECIPIENT } from \"common/model/Dfe\";\nimport { CPF_RECIPIENT } from \"common/model/Dfe\";\nimport { DFE_VALUE } from \"common/model/Dfe\";\nimport { FISCAL_NOTIFICATION_TYPE } from \"common/model/Notification\";\nimport { DFE_TYPE } from \"common/model/Dfe\";\nimport { mountGroupsFilterClause } from \"axios/AxiosUtils\";\nimport { GROUP_IDS } from \"axios/AxiosUtils\";\nimport { QUERY } from \"axios/AxiosUtils\";\nimport { FILTERS } from \"axios/AxiosUtils\";\nimport { mdfeIssuanceTagFilters } from \"../utils/filters\";\nimport { DfeTimestamp } from \"../utils/format-data\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function MdfeWarningTable(_ref) {\n  _s();\n\n  let {\n    openWarningModal\n  } = _ref;\n  const {\n    refreshFlag,\n    mdfeIssuanceFilters,\n    setMdfeIssuanceFilters\n  } = React.useContext(ViewsContext);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [filters, setFilters] = React.useState([]);\n  const {\n    modalData,\n    setModalData,\n    isModalActive,\n    modalType,\n    toggleModalOn,\n    toggleModalOff\n  } = useModalWithData();\n\n  const createReadHttpRequestBody = () => {\n    let httpRequestBody = createQueryHttpRequestBody(filters);\n    let groups = mountGroupsFilterClause(mdfeIssuanceFilters);\n    httpRequestBody[QUERY][GROUP_IDS] = groups;\n    httpRequestBody[FISCAL_NOTIFICATION_TYPE] = NOTIFICATION_TYPE_ENUM.MDFE;\n    return httpRequestBody;\n  };\n\n  const createCountHttpRequestBody = () => {\n    let httpRequestBody = createBaseHttpRequestBody();\n    let groups = mountGroupsFilterClause(mdfeIssuanceFilters);\n    httpRequestBody[GROUP_IDS] = groups;\n    httpRequestBody[FILTERS] = filters;\n    httpRequestBody[FISCAL_NOTIFICATION_TYPE] = NOTIFICATION_TYPE_ENUM.MDFE;\n    return httpRequestBody;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TagsInput, {\n      tagsState: [mdfeIssuanceFilters, setMdfeIssuanceFilters],\n      setQuery: setFilters,\n      columns: mdfeIssuanceTagFilters\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      dataUrl: \"/warnings/read_all\",\n      countUrl: \"/warnings/count_warnings\",\n      timeout: 10000,\n      fillData: true,\n      tags: filters,\n      loading: [isLoading, setIsLoading],\n      refresh: refreshFlag,\n      requestBody: createReadHttpRequestBody,\n      countRequestBody: createCountHttpRequestBody,\n      columns: {\n        \"Prioridade\": {\n          args: SEVERITY,\n          thStyle: {\n            textAlign: 'center'\n          },\n          func: severity => /*#__PURE__*/_jsxDEV(Severity, {\n            severity: severity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 40\n          }, this)\n        },\n        \"Nº Alerta\": {\n          args: ID_CONFIG,\n          thStyle: {\n            textAlign: 'right'\n          },\n          tdStyle: {\n            textAlign: 'right'\n          }\n        },\n        \"Alerta\": {\n          args: NAME,\n          thStyle: {\n            textAlign: 'center'\n          },\n          tdStyle: {\n            whiteSpace: 'pre',\n            textAlign: 'center'\n          },\n          Func: _ref2 => {\n            let {\n              row_data\n            } = _ref2;\n            return /*#__PURE__*/_jsxDEV(Warning, {\n              data: row_data,\n              toggleModal: openWarningModal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 43\n            }, this);\n          }\n        },\n        \"Data/Hora Emissão\": {\n          args: DHEMI,\n          thStyle: {\n            textAlign: 'center'\n          },\n          tdStyle: {\n            whiteSpace: 'pre',\n            textAlign: 'center'\n          },\n          func: date => /*#__PURE__*/_jsxDEV(DfeTimestamp, {\n            date: date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 35\n          }, this)\n        },\n        \"UF Origem\": {\n          args: MDFE_ORIGIN,\n          thStyle: {\n            textAlign: 'center'\n          },\n          tdStyle: {\n            textAlign: 'center'\n          }\n        },\n        \"UF Destino\": {\n          args: DHEMI,\n          thStyle: {\n            textAlign: 'center'\n          },\n          tdStyle: {\n            textAlign: 'center'\n          }\n        },\n        \"Disparo\": {\n          args: FISCAL_NOTIFICATION_DATE,\n          thStyle: {\n            textAlign: 'center'\n          },\n          tdStyle: {\n            whiteSpace: 'pre',\n            textAlign: 'center'\n          },\n          func: date => /*#__PURE__*/_jsxDEV(DfeTimestamp, {\n            date: date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 35\n          }, this)\n        },\n        \"Emitente\": {\n          args: [CNPJ_ISSUER, CPF_ISSUER],\n          thStyle: {\n            textAlign: 'right'\n          },\n          tdStyle: {\n            textAlign: 'right'\n          },\n          func: emitente => emitente[0] ? formatCnpjCpf(emitente[0]) : formatCnpjCpf(emitente[1])\n        },\n        \"Valor\": {\n          args: DFE_VALUE,\n          thStyle: {\n            textAlign: 'right'\n          },\n          tdStyle: {\n            textAlign: 'right'\n          },\n          func: valor => {\n            return valor ? \" R$ \".concat(valor.toLocaleString('pt-br', {\n              minimumFractionDigits: 2\n            })) : \"\";\n          }\n        },\n        \"DFE\": {\n          args: FISCAL_NOTIFICATION_TYPE,\n          Func: props => {\n            return isExternalUser() ? \"\" : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: props.type !== null && \"underlined_text\",\n              onClick: () => {\n                setModalData(props.row_data);\n                toggleModalOn(MODAL_TYPE_ENUM.DFE_ISSUANCE);\n              },\n              style: {\n                textAlign: 'center',\n                cursor: props.type !== null && \"pointer\",\n                color: '#2322c8'\n              },\n              children: DFE_TYPE[props.data]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 54\n            }, this);\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), modalType === MODAL_TYPE_ENUM.DFE_ISSUANCE && /*#__PURE__*/_jsxDEV(DfeIssuanceModal, {\n      show: isModalActive,\n      toggle: toggleModalOff,\n      data: modalData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 55\n    }, this)]\n  }, void 0, true);\n}\n\n_s(MdfeWarningTable, \"gI5l27BsgFxsVFrgW6SKJlhQkls=\", false, function () {\n  return [useModalWithData];\n});\n\n_c = MdfeWarningTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"MdfeWarningTable\");","map":{"version":3,"sources":["C:/Users/rodri/OneDrive/Documentos/cicc-app/front-end/src/views/Issuance/tables/MdfeWarningTable.js"],"names":["React","ViewsContext","TagsInput","Table","MODAL_TYPE_ENUM","useModalWithData","MDFE_ORIGIN","DfeIssuanceModal","NOTIFICATION_TYPE_ENUM","createBaseHttpRequestBody","createQueryHttpRequestBody","isExternalUser","formatCnpjCpf","SEVERITY","Severity","ID_CONFIG","NAME","Warning","DHEMI","FISCAL_NOTIFICATION_DATE","CNPJ_ISSUER","CPF_ISSUER","CNPJ_RECIPIENT","CPF_RECIPIENT","DFE_VALUE","FISCAL_NOTIFICATION_TYPE","DFE_TYPE","mountGroupsFilterClause","GROUP_IDS","QUERY","FILTERS","mdfeIssuanceTagFilters","DfeTimestamp","MdfeWarningTable","openWarningModal","refreshFlag","mdfeIssuanceFilters","setMdfeIssuanceFilters","useContext","isLoading","setIsLoading","useState","filters","setFilters","modalData","setModalData","isModalActive","modalType","toggleModalOn","toggleModalOff","createReadHttpRequestBody","httpRequestBody","groups","MDFE","createCountHttpRequestBody","args","thStyle","textAlign","func","severity","tdStyle","whiteSpace","Func","row_data","date","emitente","valor","toLocaleString","minimumFractionDigits","props","type","DFE_ISSUANCE","cursor","color","data"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { ViewsContext } from \"context/ViewsContext\";\r\nimport TagsInput from \"components/tags/TagsInput\";\r\nimport Table from \"components/tables/Table\";\r\nimport MODAL_TYPE_ENUM from \"common/enumerators/ModalTypeEnum\";\r\nimport { useModalWithData } from \"common/hooks/useModalWithData\";\r\nimport { MDFE_ORIGIN } from \"common/model/Mdfe\";\r\nimport DfeIssuanceModal from \"components/modals/DfeIssuanceModal/DfeIssueanceModal\";\r\n\r\nimport NOTIFICATION_TYPE_ENUM from \"common/enumerators/NotificationTypeEnum\";\r\n\r\nimport { createBaseHttpRequestBody, createQueryHttpRequestBody } from \"axios/AxiosUtils\";\r\nimport { isExternalUser } from \"common/SessionUtils\";\r\nimport { formatCnpjCpf } from \"common/utils/validate\";\r\nimport { SEVERITY } from \"common/model/WarningConfig\";\r\nimport Severity from \"components/table-elements/Severity\";\r\nimport { ID_CONFIG } from \"common/model/WarningConfig\";\r\nimport { NAME } from \"common/model/WarningConfig\";\r\nimport Warning from \"components/table-elements/Warning\";\r\nimport { DHEMI } from \"common/model/Dfe\";\r\nimport { FISCAL_NOTIFICATION_DATE } from \"common/model/Notification\";\r\nimport { CNPJ_ISSUER } from \"common/model/Dfe\";\r\nimport { CPF_ISSUER } from \"common/model/Dfe\";\r\nimport { CNPJ_RECIPIENT } from \"common/model/Dfe\";\r\nimport { CPF_RECIPIENT } from \"common/model/Dfe\";\r\nimport { DFE_VALUE } from \"common/model/Dfe\";\r\nimport { FISCAL_NOTIFICATION_TYPE } from \"common/model/Notification\";\r\nimport { DFE_TYPE } from \"common/model/Dfe\";\r\nimport { mountGroupsFilterClause } from \"axios/AxiosUtils\";\r\nimport { GROUP_IDS } from \"axios/AxiosUtils\";\r\nimport { QUERY } from \"axios/AxiosUtils\";\r\nimport { FILTERS } from \"axios/AxiosUtils\";\r\nimport { mdfeIssuanceTagFilters } from \"../utils/filters\";\r\nimport { DfeTimestamp } from \"../utils/format-data\";\r\n\r\n\r\nexport default function MdfeWarningTable({openWarningModal }) {\r\n\r\n  const { refreshFlag, mdfeIssuanceFilters, setMdfeIssuanceFilters } = React.useContext(ViewsContext)\r\n  const [isLoading, setIsLoading] = React.useState(false)\r\n  const [filters, setFilters] = React.useState([])\r\n\r\n  const { modalData, setModalData, isModalActive, modalType, toggleModalOn, toggleModalOff } = useModalWithData()\r\n\r\n\r\n  const createReadHttpRequestBody = () => {\r\n    let httpRequestBody = createQueryHttpRequestBody(filters)\r\n    let groups = mountGroupsFilterClause(mdfeIssuanceFilters)\r\n\r\n    httpRequestBody[QUERY][GROUP_IDS] = groups\r\n    httpRequestBody[FISCAL_NOTIFICATION_TYPE] = NOTIFICATION_TYPE_ENUM.MDFE\r\n\r\n    return httpRequestBody\r\n  }\r\n\r\n  const createCountHttpRequestBody = () => {\r\n\r\n    let httpRequestBody = createBaseHttpRequestBody()\r\n    let groups = mountGroupsFilterClause(mdfeIssuanceFilters)\r\n\r\n    httpRequestBody[GROUP_IDS] = groups\r\n    httpRequestBody[FILTERS] = filters\r\n    httpRequestBody[FISCAL_NOTIFICATION_TYPE] = NOTIFICATION_TYPE_ENUM.MDFE\r\n\r\n    return httpRequestBody\r\n  }\r\n\r\n\r\n  return (<>\r\n     <TagsInput\r\n              tagsState={[mdfeIssuanceFilters, setMdfeIssuanceFilters]}\r\n              setQuery={setFilters}\r\n              columns={mdfeIssuanceTagFilters}\r\n            />\r\n            <Table\r\n              dataUrl=\"/warnings/read_all\"\r\n              countUrl=\"/warnings/count_warnings\"\r\n              timeout={10000}\r\n              fillData\r\n              tags={filters}\r\n              loading={[isLoading, setIsLoading]}\r\n              refresh={refreshFlag}\r\n              requestBody={createReadHttpRequestBody}\r\n              countRequestBody={createCountHttpRequestBody}\r\n              columns={{\r\n                \"Prioridade\": {\r\n                  args: SEVERITY,\r\n                  thStyle: { textAlign: 'center' },\r\n                  func: (severity) =>  <Severity severity={severity} />\r\n                },\r\n                \"Nº Alerta\": {\r\n                  args: ID_CONFIG,\r\n                  thStyle: { textAlign: 'right' },\r\n                  tdStyle: { textAlign: 'right' },\r\n                },\r\n                \"Alerta\": {\r\n                  args: NAME,\r\n                  thStyle: { textAlign: 'center' },\r\n                  tdStyle: { whiteSpace: 'pre', textAlign: 'center' },\r\n                  Func: ({ row_data }) => <Warning data={row_data} toggleModal={openWarningModal}/>\r\n                },\r\n                \"Data/Hora Emissão\": {\r\n                  args: DHEMI,\r\n                  thStyle: { textAlign: 'center' },\r\n                  tdStyle: { whiteSpace: 'pre', textAlign: 'center' },\r\n                  func: (date) => <DfeTimestamp date={date}/>\r\n                },\r\n                \"UF Origem\": {\r\n                  args: MDFE_ORIGIN,\r\n                  thStyle: { textAlign: 'center' },\r\n                  tdStyle: { textAlign: 'center' },\r\n                },\r\n                \"UF Destino\": {\r\n                  args: DHEMI,\r\n                  thStyle: { textAlign: 'center' },\r\n                  tdStyle: { textAlign: 'center' },\r\n                },\r\n                \"Disparo\": {\r\n                  args: FISCAL_NOTIFICATION_DATE,\r\n                  thStyle: { textAlign: 'center' },\r\n                  tdStyle: { whiteSpace: 'pre', textAlign: 'center' },\r\n                  func: (date) => <DfeTimestamp date={date}/>\r\n                },\r\n                \"Emitente\": {\r\n                  args: [CNPJ_ISSUER, CPF_ISSUER],\r\n                  thStyle: { textAlign: 'right' },\r\n                  tdStyle: { textAlign: 'right' },\r\n                  func: (emitente) => emitente[0] ? formatCnpjCpf(emitente[0]) : formatCnpjCpf(emitente[1])\r\n                },\r\n                \"Valor\": {\r\n                  args: DFE_VALUE,\r\n                  thStyle: { textAlign: 'right' },\r\n                  tdStyle: { textAlign: 'right' },\r\n                  func: (valor) => { return (valor) ? ` R$ ${valor.toLocaleString('pt-br', { minimumFractionDigits: 2 })}` : \"\" }\r\n                },\r\n                \"DFE\": {\r\n                  args: FISCAL_NOTIFICATION_TYPE,\r\n                  Func: (props) => {\r\n                    return (isExternalUser()) ? \"\" : <div\r\n                      className={props.type !== null && \"underlined_text\"}\r\n                      onClick={() => { setModalData(props.row_data); toggleModalOn(MODAL_TYPE_ENUM.DFE_ISSUANCE) }}\r\n                      style={{ textAlign: 'center', cursor: props.type !== null && \"pointer\", color: '#2322c8' }}\r\n                      >\r\n                        {DFE_TYPE[props.data]}\r\n                      </div>\r\n                  }\r\n                }\r\n              }} \r\n      />\r\n \r\n      {modalType === MODAL_TYPE_ENUM.DFE_ISSUANCE &&  <DfeIssuanceModal show={isModalActive} toggle={toggleModalOff} data={modalData} />}\r\n      \r\n  </>)\r\n}"]},"metadata":{},"sourceType":"module"}