{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rodri\\\\OneDrive\\\\Documentos\\\\cicc-app\\\\front-end\\\\src\\\\layouts\\\\WarningConfigHistory.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Button, Card, CardTitle } from \"reactstrap\";\nimport { HiPrinter } from \"react-icons/hi\";\nimport SEVERITY_ENUM from '../common/enumerators/SeverityEnum';\nimport { getConfigStatusLabel } from 'common/enumerators/StatusEnum';\nimport STATUS_ENUM from 'common/enumerators/StatusEnum';\nimport { convertUtcToBrazilianDate } from 'common/utils/validate';\nimport { compareLastTwoLogs, checkIfKeyIsInDiff } from 'common/rules/NotificationRules';\nimport logo from \"logo.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst WarningConfigHistoryLayout = () => {\n  _s();\n\n  const historyData = JSON.parse(sessionStorage.getItem('historyData'));\n  const [pageLoadDate, setPageLoadDate] = React.useState(null);\n  React.useEffect(() => {\n    const currentDate = new Date();\n    setPageLoadDate(currentDate.toLocaleDateString());\n  }, []);\n\n  const handlePrint = () => {\n    const content = document.querySelector('.content');\n    const printWindow = window.open('', '_blank');\n\n    if (printWindow) {\n      printWindow.document.write('<html><head>'); // Copiar estilos CSS\n\n      const stylesheets = document.querySelectorAll('link[rel=\"stylesheet\"]');\n      stylesheets.forEach(stylesheet => {\n        printWindow.document.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\".concat(stylesheet.href, \"\\\">\"));\n      });\n      printWindow.document.write('</head><body>'); // Copiar conteúdo da página, incluindo imagens\n\n      printWindow.document.write(document.documentElement.outerHTML);\n      printWindow.document.write('</body></html>');\n      printWindow.document.close(); // Aguardar até que o conteúdo seja totalmente carregado antes de imprimir\n\n      printWindow.addEventListener('load', () => {\n        printWindow.print();\n      });\n    }\n  };\n\n  const getTypeConfig = value => {\n    const CONFIG_TYPE_CONDITIONS_REVERSE = {\n      0: 'Todos (Passagens com e sem DFE, Emissões de MDFE e NFE)',\n      1: 'Apenas Passagens sem DFE',\n      5: 'Apenas Passagens com DFE',\n      2: 'Apenas Passagens com DFE e Emissões de MDFE/NFE',\n      4: 'Apenas Emissões de MDFE',\n      3: 'Apenas Emissões de NFE'\n    };\n    return CONFIG_TYPE_CONDITIONS_REVERSE[value];\n  };\n\n  const getTypeOfConfigs = objeto => {\n    let resultado = '';\n\n    for (const chave in objeto) {\n      if (objeto[chave] !== null) {\n        let chaveFormatada = chave.replace(/_/g, ' ');\n        resultado += \"\".concat(chaveFormatada, \": \").concat(objeto[chave], \", \");\n      }\n    }\n\n    return resultado.slice(0, -2);\n  };\n\n  const log_diff = compareLastTwoLogs(historyData);\n  console.log(log_diff);\n  const strongStyle = {\n    marginRight: '1px',\n    marginLeft: '8px'\n  };\n\n  const getStyleDiff = (key, i) => {\n    const log = i;\n    const previousLog = historyData[historyData.indexOf(log) - 1];\n\n    if (previousLog) {\n      if (checkIfKeyIsInDiff(key, previousLog, log, log_diff)) {\n        return {\n          color: '#B80000',\n          ...strongStyle\n        };\n      }\n    }\n\n    return strongStyle;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          padding: '20px',\n          marginLeft: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            width: '100px',\n            height: 'auto',\n            marginRight: '10px'\n          },\n          src: logo,\n          alt: \"cicc-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            position: 'relative',\n            top: '20px'\n          },\n          children: \"Hist\\xF3rico de Configura\\xE7\\xE3o de Alerta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: '10px',\n        position: 'relative'\n      },\n      children: historyData.length > 0 && historyData.map(i => {\n        var _i$id_config, _i$nome, _convertUtcToBrazilia;\n\n        const status = getConfigStatusLabel(i);\n        const config = getTypeConfig(i.config_type);\n        const conditions = getTypeOfConfigs(i.configuracao);\n        return /*#__PURE__*/_jsxDEV(Card, {\n          body: true,\n          style: {\n            width: \"95%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: [i.config_modification_user === null ? 'Criado por ' : 'Editado por ', \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: i.config_modification_user === null ? i.criador : i.config_modification_user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 111\n            }, this), \" \\xE0s \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\" \", i.config_modification_user === null ? convertUtcToBrazilianDate(i.data_criacao) : convertUtcToBrazilianDate(i.config_modification_date)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 210\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"id_config\", i),\n              children: \"N\\xBA Alerta: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 33\n            }, this), \" \", (_i$id_config = i.id_config) !== null && _i$id_config !== void 0 ? _i$id_config : \"\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"status\", i),\n              children: \"Status: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 33\n            }, this), i.config_modification_user !== null ? status : \"Criado\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"nome\", i),\n              children: \" Alerta: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 33\n            }, this), \" \", (_i$nome = i.nome) !== null && _i$nome !== void 0 ? _i$nome : \"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"data_fechamento\", i),\n              children: \"Data de Fechamento:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 33\n            }, this), \" \", (_convertUtcToBrazilia = convertUtcToBrazilianDate(i.data_fechamento)) !== null && _convertUtcToBrazilia !== void 0 ? _convertUtcToBrazilia : '', /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"config_type\", i),\n              children: \"Tipo de Configura\\xE7\\xE3o: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this), \" \", config]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"visibility_groups\", i),\n              children: \" Visibilidade: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 33\n            }, this), \" \", i.visibility_groups, /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"configuracao\", i),\n              children: \"Condi\\xE7\\xF5es: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 33\n            }, this), \" \", conditions, /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"severidade\", i),\n              children: \"Priodidade: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 33\n            }, this), \" \", SEVERITY_ENUM[i.severidade]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"descricao\", i),\n              children: \" Descri\\xE7\\xE3o do alerta: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 33\n            }, this), \" \", i.descricao]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"procedimentos\", i),\n              children: \" A\\xE7\\xE3o fiscal: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 33\n            }, this), \" \", i.procedimentos]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this), i.config_pause_timestamp && i.config_pause_timestamp !== null && i.config_pause_timestamp !== '' && i.config_status === STATUS_ENUM.PAUSED && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"config_pause_timestamp\", i),\n              children: \" Alerta pausado at\\xE9: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 37\n            }, this), \" \", convertUtcToBrazilianDate(i.config_pause_timestamp), /*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"config_pause_report\", i),\n              children: \" Motivo: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 37\n            }, this), \" \", i.config_pause_report]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 33\n          }, this), i.config_pause_timestamp && i.config_pause_timestamp !== null && i.config_pause_timestamp !== '' && i.config_status === STATUS_ENUM.ACTIVE && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              style: getStyleDiff(\"config_pause_timestamp\", i),\n              children: \" Alerta reativado em: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 37\n            }, this), \" \", convertUtcToBrazilianDate(i.config_pause_timestamp)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 33\n          }, this)]\n        }, i.id_config, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        bottom: '15px',\n        right: '10px',\n        zIndex: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          borderRadius: '50%',\n          backgroundColor: '#007bff',\n          padding: '15px',\n          border: 'none',\n          boxShadow: '0px 0px 10px rgba(0, 0, 0, 0.2)'\n        },\n        size: \"md\",\n        id: \"print-button\",\n        onClick: handlePrint,\n        children: /*#__PURE__*/_jsxDEV(HiPrinter, {\n          style: {\n            fontSize: '3em'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 214\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      style: {\n        textAlign: 'center',\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"P\\xE1gina aberta em: \", pageLoadDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(WarningConfigHistoryLayout, \"8EO5/rte8Xo7PQQj1EMZtGkbWX4=\");\n\n_c = WarningConfigHistoryLayout;\nexport default WarningConfigHistoryLayout;\n\nvar _c;\n\n$RefreshReg$(_c, \"WarningConfigHistoryLayout\");","map":{"version":3,"sources":["C:/Users/rodri/OneDrive/Documentos/cicc-app/front-end/src/layouts/WarningConfigHistory.js"],"names":["React","Button","Card","CardTitle","HiPrinter","SEVERITY_ENUM","getConfigStatusLabel","STATUS_ENUM","convertUtcToBrazilianDate","compareLastTwoLogs","checkIfKeyIsInDiff","WarningConfigHistoryLayout","historyData","JSON","parse","sessionStorage","getItem","pageLoadDate","setPageLoadDate","useState","useEffect","currentDate","Date","toLocaleDateString","handlePrint","content","document","querySelector","printWindow","window","open","write","stylesheets","querySelectorAll","forEach","stylesheet","href","documentElement","outerHTML","close","addEventListener","print","getTypeConfig","value","CONFIG_TYPE_CONDITIONS_REVERSE","getTypeOfConfigs","objeto","resultado","chave","chaveFormatada","replace","slice","log_diff","console","log","strongStyle","marginRight","marginLeft","getStyleDiff","key","i","previousLog","indexOf","color","textAlign","marginBottom","display","alignItems","padding","width","height","logo","position","top","flexDirection","justifyContent","marginTop","length","map","status","config","config_type","conditions","configuracao","config_modification_user","criador","data_criacao","config_modification_date","id_config","nome","data_fechamento","visibility_groups","severidade","descricao","procedimentos","config_pause_timestamp","config_status","PAUSED","config_pause_report","ACTIVE","bottom","right","zIndex","borderRadius","backgroundColor","border","boxShadow","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n    Button,\r\n    Card,\r\n    CardTitle,\r\n} from \"reactstrap\";\r\nimport { HiPrinter } from \"react-icons/hi\";\r\nimport SEVERITY_ENUM from '../common/enumerators/SeverityEnum'\r\nimport { getConfigStatusLabel } from 'common/enumerators/StatusEnum';\r\nimport STATUS_ENUM from 'common/enumerators/StatusEnum';\r\nimport { convertUtcToBrazilianDate } from 'common/utils/validate';\r\nimport { compareLastTwoLogs, checkIfKeyIsInDiff } from 'common/rules/NotificationRules';\r\nimport logo from \"logo.svg\";\r\n\r\n\r\nconst WarningConfigHistoryLayout = () => { \r\n    const historyData = JSON.parse(sessionStorage.getItem('historyData'));\r\n    const [pageLoadDate, setPageLoadDate] = React.useState(null);\r\n    React.useEffect(() => {\r\n        const currentDate = new Date();\r\n        setPageLoadDate(currentDate.toLocaleDateString());\r\n    }, []);\r\n    \r\n    const handlePrint = () => {\r\n        const content = document.querySelector('.content');\r\n        const printWindow = window.open('', '_blank');\r\n        if (printWindow) {\r\n            printWindow.document.write('<html><head>');\r\n        \r\n            // Copiar estilos CSS\r\n            const stylesheets = document.querySelectorAll('link[rel=\"stylesheet\"]');\r\n            stylesheets.forEach((stylesheet) => {\r\n                printWindow.document.write(`<link rel=\"stylesheet\" href=\"${stylesheet.href}\">`);\r\n            });\r\n        \r\n            printWindow.document.write('</head><body>');\r\n        \r\n            // Copiar conteúdo da página, incluindo imagens\r\n            printWindow.document.write(document.documentElement.outerHTML);\r\n        \r\n            printWindow.document.write('</body></html>');\r\n            printWindow.document.close();\r\n        \r\n            // Aguardar até que o conteúdo seja totalmente carregado antes de imprimir\r\n            printWindow.addEventListener('load', () => {\r\n                printWindow.print();\r\n            });\r\n        }\r\n    };\r\n\r\n    \r\n    const getTypeConfig = (value) => {\r\n        const CONFIG_TYPE_CONDITIONS_REVERSE = {\r\n            0: 'Todos (Passagens com e sem DFE, Emissões de MDFE e NFE)',\r\n            1: 'Apenas Passagens sem DFE',\r\n            5: 'Apenas Passagens com DFE',\r\n            2: 'Apenas Passagens com DFE e Emissões de MDFE/NFE',\r\n            4: 'Apenas Emissões de MDFE',\r\n            3: 'Apenas Emissões de NFE'\r\n        };\r\n\r\n        return CONFIG_TYPE_CONDITIONS_REVERSE[value];\r\n    };\r\n\r\n    const getTypeOfConfigs = (objeto) => {\r\n        let resultado = '';\r\n        for (const chave in objeto) {\r\n            if (objeto[chave] !== null) {\r\n                let chaveFormatada = chave.replace(/_/g, ' ');\r\n                resultado += `${chaveFormatada}: ${objeto[chave]}, `;\r\n            }\r\n        }\r\n        return resultado.slice(0, -2);\r\n    }\r\n\r\n    const log_diff = compareLastTwoLogs(historyData);\r\n    console.log(log_diff)\r\n    \r\n    const strongStyle = { marginRight: '1px', marginLeft: '8px'};\r\n    \r\n    const getStyleDiff = (key, i) => {\r\n        const log = i;\r\n\r\n        const previousLog = historyData[historyData.indexOf(log) - 1];\r\n        if (previousLog) {\r\n            if (checkIfKeyIsInDiff(key, previousLog, log, log_diff)) {\r\n                return { color: '#B80000', ...strongStyle };\r\n            }\r\n        }\r\n        return strongStyle;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header style={{ textAlign: 'center', marginBottom: '20px' }}>\r\n            <div style={{display: 'flex', alignItems: 'center', padding: '20px', marginLeft: '20px'}}>\r\n              <img style={{width: '100px', height: 'auto', marginRight: '10px'}} src={logo} alt=\"cicc-logo\" />\r\n              <h2 style={{position:'relative',top: '20px'}}>Histórico de Configuração de Alerta</h2>\r\n            </div>\r\n            \r\n            </header>\r\n            <div className=\"content\" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: '10px', position: 'relative' }}>\r\n                {historyData.length > 0 && historyData.map(i => {\r\n                    const status = getConfigStatusLabel(i);\r\n                    const config = getTypeConfig(i.config_type);\r\n                    const conditions = getTypeOfConfigs(i.configuracao);\r\n                    \r\n                    return (\r\n                        <Card body key={i.id_config} style={{ width: \"95%\" }}>\r\n                            <CardTitle>{i.config_modification_user === null ? 'Criado por ' : 'Editado por '} <strong>{i.config_modification_user === null ? i.criador : i.config_modification_user}</strong> às <strong> {i.config_modification_user === null ? convertUtcToBrazilianDate(i.data_criacao) : convertUtcToBrazilianDate(i.config_modification_date)}</strong></CardTitle>\r\n                            <p>\r\n                                <strong style={getStyleDiff(\"id_config\", i)}>Nº Alerta: </strong> {i.id_config ?? \"\"}\r\n                                <strong style={getStyleDiff(\"status\", i)}>Status: </strong>{i.config_modification_user !== null ? status : \"Criado\"}\r\n                                <strong style={getStyleDiff(\"nome\", i)}> Alerta: </strong> {i.nome ?? \"\"}\r\n                            </p>\r\n                            <p>\r\n                                <strong style={getStyleDiff(\"data_fechamento\", i)}>Data de Fechamento:</strong> {convertUtcToBrazilianDate(i.data_fechamento) ?? ''}\r\n                                <strong style={getStyleDiff(\"config_type\", i)}>Tipo de Configuração: </strong> {config}\r\n\r\n                            </p>\r\n                            <p>\r\n                                <strong style={getStyleDiff(\"visibility_groups\", i)}> Visibilidade: </strong> {i.visibility_groups}\r\n                                <strong style={getStyleDiff(\"configuracao\", i)}>Condições: </strong> {conditions}\r\n                                <strong style={getStyleDiff(\"severidade\", i)}>Priodidade: </strong> {SEVERITY_ENUM[i.severidade]}\r\n                            </p>\r\n                            <p>\r\n                                <strong style={getStyleDiff(\"descricao\", i)}> Descrição do alerta: </strong> {i.descricao}\r\n                            </p>\r\n                            <p>\r\n                                <strong style={getStyleDiff(\"procedimentos\", i)}> Ação fiscal: </strong> {i.procedimentos}\r\n                            </p>\r\n\r\n                            {i.config_pause_timestamp && i.config_pause_timestamp !== null && i.config_pause_timestamp !== '' && i.config_status === STATUS_ENUM.PAUSED &&\r\n                                <p>\r\n                                    <strong style={getStyleDiff(\"config_pause_timestamp\", i)}> Alerta pausado até: </strong> {convertUtcToBrazilianDate(i.config_pause_timestamp)}\r\n                                    <strong style={getStyleDiff(\"config_pause_report\", i)}> Motivo: </strong> {i.config_pause_report}\r\n                                </p>\r\n                            }\r\n\r\n                            {i.config_pause_timestamp && i.config_pause_timestamp !== null && i.config_pause_timestamp !== '' && i.config_status === STATUS_ENUM.ACTIVE &&\r\n                                <p>\r\n                                    <strong style={getStyleDiff(\"config_pause_timestamp\", i)}> Alerta reativado em: </strong> {convertUtcToBrazilianDate(i.config_pause_timestamp)}\r\n                            \r\n                                </p>\r\n\r\n                            }\r\n\r\n                            \r\n                        </Card>\r\n                    );\r\n                })}\r\n\r\n            </div>\r\n            \r\n            <div style={{ position: 'fixed', bottom: '15px', right: '10px', zIndex: 1 }}>\r\n                <Button style={{ borderRadius: '50%', backgroundColor: '#007bff', padding: '15px', border: 'none', boxShadow: '0px 0px 10px rgba(0, 0, 0, 0.2)' }} size=\"md\" id=\"print-button\" onClick={handlePrint}><HiPrinter style={{ fontSize: '3em' }} /></Button>\r\n            </div>\r\n\r\n            <footer style={{ textAlign: 'center', marginTop: '20px' }}>\r\n                <p>Página aberta em: {pageLoadDate}</p>\r\n            </footer>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default WarningConfigHistoryLayout;\r\n"]},"metadata":{},"sourceType":"module"}